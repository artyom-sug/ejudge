#include <iostream>
#include <vector>
using namespace std;
#define pb push_back

int n, graph[200001];
vector<int> res;

int main() {
	cin >> n;
	graph[1] = 0;
	for (int i = 1; i < n; i++) {
		cin >> graph[i + 1];
	}
	int j = n;
	while (graph[j] != 0) {
		res.pb(j);
		j = graph[j];
	}
	cout << '1';
	for (int i = res.size() - 1; i >= 0; i--) {
		cout << ' ' << res[i];
	}
	cout << endl;
}
